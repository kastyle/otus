# **Домашняя работа №9**

## **1. Цель работы**

1. Запретить всем пользователям, кроме группы admin логин в выходные (суббота и воскресенье), без учета праздников.
2. Дать конкретному пользователю права работать с докером и возможность рестартить докер сервис.

**Используемые инструменты:**

- **VirtualBox**- среда виртуализации, позволяет создавать и выполнять виртуальные машины;
- **Vagrant**- ПО для создания и конфигурирования виртуальной среды. В данном случае в качестве среды виртуализации используется VirtualBox;
- **Github**- система контроля версий;
- **VSCode**- Удобный редактор кода, со множеством полезных функций;
- **Docer** - программное обеспечение для автоматизации развёртывания и управления приложениями в средах с поддержкой контейнеризации.
- Все действия выполнялись под **Centos 7**

## **2. Запрещаем логин пользователям**

Первое, что нам нужно сделать, это добавить пользователей, задать им пароли.
```
[root@centos ~]# useradd admin && useradd vasya-user && useradd liza-user
[root@centos ~]# echo "12345" | passwd --stdin admin && echo "12345" | passwd --stdin vasya-user && echo "12345" | passwd --stdin liza-user 
```
Далее, создаем группы. Для тестирования работы pam будет создано 2 группы: admin и myusers. 
```
[root@centos ~]# groupadd myusers
[root@centos ~]# usermod -a -G myusers vasya-user && usermod -a -G myusers liza-user 
```
Чтобы быть уверенными, что на стенде разрешен вход через ssh по паролю, выполним следующую команду:
```
[root@centos ~]# sudo bash -c "sed -i 's/^PasswordAuthentication.*$/PasswordAuthentication yes/' /etc/ssh/sshd_config && systemctl restart sshd.service"
```
Теперь можно приступать к выполнению. Изночально, задание планировалось сделать через модуль pam_time, что, на первый взгляд, логично и удобно. Но, по тем или иным причинам данный способ оказался не эффективным для групп (для отдельных пользователей все прекрасно работало, но для групп - нет). Так же, данные способ будет не удобен, если администратору приходится часто добавлять или удалять пользователей. Поэтому, задание будет выполнено через модуль **pam_script**, который по итогу оказаля более гибким и удобным решением.

Установим модуль pam_script:
[root@centos ~]# yum install pam_script -y
